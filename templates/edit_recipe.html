{% extends 'base.html' %}
{% block content %}

<div class="container-fluid">
        <h1 class="header center teal-text text-lighten-2">Edit Recipe</h1>
        <div class="row center">
          <h5 class="header col s12 dark">Edit recipe details below and hit the button 'Submit Changes'</h5><br>
        </div>
</div>

<div class="container">
  <ul class="collapsible">
    <li>
    <div class="collapsible-header"><i class="material-icons">info</i>Instructions For Pasting Image Links</div>
    <div class="collapsible-body"><span>To paste a URL for an image and commit this to the database, simply find the image you want via google or directly from a webpage and then: Right click on the image and select the option 'copy image addess':</span><p><a><img class="responsive-img" src={{url_for ('static', filename='img/image_address.png') }} alt="Copy Image Address"></a></p></div>
    </li>
  </ul>
</div><br><br>

<div class="container">
        <h5 class="header center teal-text text-lighten-2">Current Image Used For This Recipe:</h5><br>
        <div class="row center">
        <img id="current_image" class="activator responsive-img" src={{ recipe.image }} alt="{{ recipe.description }}">
        </div>
</div><br><br>

<div class="container">

<div class="row">
    <form action="{{ url_for('update_recipe', recipe_id=recipe._id) }}" method="POST" class="col s12">
      
      <div class="row">
        <div class="input-field col s12 m12 l12">
          <i class="material-icons prefix">sort</i>
          <input id="description" name="description" type="text" class="validate" value="{{ recipe.description }}">
          <label for="name">Recipe Description</label>
        </div>
      </div>
      
      <div class="row">
         
         <div class="input-field col s12 m6 l6">
           <i class="material-icons prefix">poll</i>
            <select id="category" name="category">
            <option value="" disabled selected>Choose A Category</option>
            {% for category in categories %}
                {% if category.category == recipe.category %} 
                <option value="{{ category.category }}" selected>{{ category.category }}</option>
                {% else %}
                <option value="{{ category.category }}">{{ category.category }}</option>
                {% endif %}            
            {% endfor %}
          </select>
        <label>Category</label>
        </div>
        
        <div class="input-field col s12 m6 l6">
           <i class="material-icons prefix">poll</i>
            <select id="cuisine" name="cuisine">
            <option value="" disabled selected>Choose A Cuisine Type</option>
            {% for cuisine in cuisines %}
            {% if cuisine.cuisine == recipe.cuisine %} 
                <option value="{{ cuisine.cuisine }}" selected>{{ cuisine.cuisine }}</option>
                {% else %}
                <option value="{{ cuisine.cuisine }}">{{ cuisine.cuisine }}</option>
                {% endif %}            
            {% endfor %}
          </select>
        <label>Cuisine</label>
        </div>
      </div>
      
      <div class="row">
         
         <div class="input-field col s12 m6 l6">
           <i class="material-icons prefix">poll</i>
            <select id="main_ing" name="main_ing">
            <option value="" disabled selected>Choose A Main Ingredient</option>
            {% for main_ing in main_ings %}
                {% if main_ing.main_ing == recipe.main_ing %} 
                <option value="{{ main_ing.main_ing }}" selected>{{ main_ing.main_ing }}</option>
                {% else %}
                <option value="{{ main_ing.main_ing }}">{{ main_ing.main_ing }}</option>
                {% endif %}            
            {% endfor %}
          </select>
        <label>Main Ingredient</label>
        </div>
        
        <div class="input-field col s12 m6 l6">
           <i class="material-icons prefix">poll</i>
            <select id="serves" name="serves">
            <option value="" disabled selected>Choose How Many This Meal Serves</option>
            {% for serves in serving %}
            {% if serves.serves == recipe.serves %} 
                <option value="{{ serves.serves }}" selected>{{ serves.serves }}</option>
                {% else %}
                <option value="{{ serves.serves }}">{{ serves.serves }}</option>
                {% endif %}            
            {% endfor %}
          </select>
        <label>Serves</label>
        </div>
        
      </div>
      
      <div class="row">
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">sort</i>
          <input id="name" name="name" type="text" class="validate" value="{{ recipe.name }}">
          <label for="name">Recipe Name</label>
        </div>
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">image</i>
          <input id="image" name="image" type="text" class="validate" value="{{ recipe.image }}">
          <span class="helper-text" data-error="Try again" data-success="Done">Paste an image address/url into this field</span>
          <label for="image">Recipe Image URL</label>
        </div>
      </div>
      
      <div class="row">
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">timer</i><br><br>
          <p class="range-field">
          <input type="range" id="prep_time" name="prep_time" value="{{ recipe.prep_time }}" min="0" max="120" />
          </p>
          <label for="prep_time">Prepearation Time (mins)</label>
        </div>
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">timer</i><br><br>
          <p class="range-field">
          <input type="range" id="cooking_time" name="cooking_time" value="{{ recipe.cooking_time }}" min="0" max="600" />
          </p>
          <label for="cooking_time">Cooking Time (mins)</label>
        </div>
      </div>
      
      <div class="row">
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">sort</i>
          {% for i in recipe.ingredients %}
          {{ i["ing_name"] }}
          <input id="ing_name" name="ing_name" type="text" class="validate" value="{{ ing_name }}">
          {% endfor %}
          <label for="name">Ingredients</label>
        </div>
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">image</i>
          {% for i in recipe.method %}
          {{ i["step"] }}
          <input id="method" name="method" type="text" class="validate" value="{{ step }}">
          {% endfor %}
          <label for="image">Method</label>
        </div>
      </div>
      
      <div class="row">
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">today</i>
          <input id="data_added" name="date_added" type="text" class="datepicker">
          <label for="date_added">Date Added (today)</label>
        </div>
        <div class="input-field col s12 m6 l6">
          <i class="material-icons prefix">account_circle</i>
          <input id="added_by" name="added_by" type="text" class="validate">
          <label for="name">Added By</label>
        </div>
      </div>
      
      <button class="btn waves-effect waves-light pulse" type="submit" name="action">Submit Changes
      <i class="material-icons right">playlist_add</i>
      </button>
    </form>
  </div>

    
</div>
   
{% endblock %}